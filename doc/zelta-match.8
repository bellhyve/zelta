'\" t
.\" Automatically generated by Pandoc 3.8.3
.\"
.TH "zelta\-match" "8" "" "" "System Manager\(cqs Manual"
.SH NAME
\f[B]zelta match\f[R] \- Describes the relationship between a dataset
tree and its replica.
.SH SYNOPSIS
\f[B]zelta match\f[R] [\f[B]\-Hp\f[R]] [\f[B]\-d\f[R] \f[I]depth\f[R]]
[\f[B]\-o\f[R] \f[I]field\f[R][,\&...]] \f[I]source\f[R]
\f[I]target\f[R]
.SH DESCRIPTION
\f[CR]zelta match\f[R] recursively displays a dataset and its children,
the \f[I]source\f[R], and compares it to its replica, the
\f[I]target\f[R].
\f[CR]zelta match\f[R] displays fields describing differences and
similarities between the two dataset trees.
This is useful for assisting with replication operations and confirming
backups.
.PP
\f[B]Logging Options\f[R]
.TP
\f[B]\-v,\-\-verbose\f[R]
Increase verbosity.
Specify once for operational detail and twice (\-vv) for debug output.
.TP
\f[B]\-q,\-\-quiet\f[R]
Quiet output.
Specify once to suppress warnings and twice (\-qq) to suppress errors.
.TP
\f[B]\-\-log\-level\f[R]
Specify a log level value 0\-4: errors (0), warnings (1), notices (2,
default), info (3, verbose), and debug (4).
.TP
\f[B]\-\-log\-mode\f[R]
Enable the specified log modes: `text' and `json' are currently
supported.
.TP
\f[B]\-\-text\f[R]
Forces default output (notices) to print as plain text standard output.
.TP
\f[B]\-n,\-\-dryrun,\(endry\-run\f[R]
Display `zfs' commands related to the action rather than running them.
.PP
** Dataset and Snapshot Options**
.TP
\f[B]\-d,\-\-depth\f[R]
Limit the recursion depth of operations to the number of levels
indicated.
For example, a depth of 1 will only include the indicated dataset.
.TP
\f[B]\-\-exclude,\-X\f[R]
Exclude datasets or source snapshots matching the specified exclusion
pattern.
This option can be include multiple patters separated by commas and can
be specified multiple times.
See \f[I]EXCLUSION PATTERNS\f[R] in \f[B]zelta help options\f[R] for
details.
.PP
\f[B]Columns and Summary Behavior\f[R]
.TP
\f[B]\-H\f[R]
Suppress column headers and separate columns with a single tab.
.TP
\f[B]\-p\f[R]
Out sizes in exact numbers instead of human\-readable values like `1M'.
.TP
\f[B]\-o\f[R]
Specify a list of `zelta match' columns.
See \f[I]FIELD OPTIONS\f[R] below for detail.
.TP
\f[B]\-\-written\f[R]
Calculate data sizes for datasets and snapshots.
Enabled by default, but it can impact list time.
.TP
\f[B]\-\-time\f[R]
Calculate the time of each `zfs list' operation.
.SH FIELD OPTIONS
.PP
.TS
tab(@);
l l.
T{
FIELD
T}@T{
DESCRIPTION
T}
_
T{
ds_suffix
T}@T{
Relative dataset name
T}
T{
match
T}@T{
Latest matching snapshot
T}
T{
num_matches
T}@T{
Total number of matches
T}
T{
xfer_size
T}@T{
Unsynced data size based on snapshots
T}
T{
xfer_num
T}@T{
Unsynced snapshot count
T}
T{
src_name
T}@T{
Full source dataset name
T}
T{
src_first
T}@T{
First source snapshot
T}
T{
src_next
T}@T{
Next source snapshot after match
T}
T{
src_last
T}@T{
Latest source snapshot
T}
T{
src_written
T}@T{
Source data written since last snap
T}
T{
src_snaps
T}@T{
Total source snapshots
T}
T{
tgt_name
T}@T{
Full target dataset name
T}
T{
tgt_first
T}@T{
First target snapshot
T}
T{
tgt_next
T}@T{
Next target snapshot that is blocking sync
T}
T{
tgt_last
T}@T{
Latest target snapshot
T}
T{
tgt_written
T}@T{
Target data written since last snap
T}
T{
tgt_snaps
T}@T{
Total target snapshots
T}
T{
info
T}@T{
Sync state description
T}
.TE
.SH EXAMPLES
\f[B]Basic Comparison:\f[R] Compare snapshots between local source and
target datasets.
.IP
.EX
zelta match tank/source/dataset tank/target/dataset
.EE
.PP
\f[B]Remote Comparison:\f[R] Compare snapshots and show the size in
bytes of missing snapshots on the second system.
.IP
.EX
zelta match user\(atremote.host1:tank/source/dataset user2\(atremote.host2:tank/target/dataset
.EE
.PP
\f[B]Quick backup integrity check:\f[R] Compare the top two levels of
similar backup repositories to see which backups might be missing or out
of between each host.
.IP
.EX
zelta match \-d2 backuphost:rust101/Backups rust000/Backups
.EE
.PP
\f[B]Dry Run:\f[R] Display the \f[CR]zfs list\f[R] commands that woud be
used without executing them.
.IP
.EX
zelta match \-n tank/source/dataset tank/target/dataset
.EE
.SH SEE ALSO
zelta(8), zelta\-backup(8), zelta\-policy(8), zelta\-clone(8),
zelta\-options(8), zelta\-revert(8), zelta\-rotate(8), cron(8), ssh(1),
zfs(8)
.SH AUTHORS
Daniel J. Bell <\f[I]bellhyve\(atzelta.space\f[R]>
.SH WWW
https://zelta.space
