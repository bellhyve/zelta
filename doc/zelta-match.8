'\" t
.\" Automatically generated by Pandoc 3.8.3
.\"
.TH "zelta\-match" "8" "" "" "System Manager\(cqs Manual"
.SH NAME
\f[B]zelta match\f[R] \- Describes the relationship between a dataset
tree and its replica.
.SH SYNOPSIS
\f[B]zelta match\f[R] [\f[B]\-Hp\f[R]] [\f[B]\-d\f[R] \f[I]depth\f[R]]
[\f[B]\-o\f[R] \f[I]field\f[R][,\&...]] \f[I]source\-endpoint\f[R]
\f[I]target\-endpoint\f[R]
.SH DESCRIPTION
\f[CR]zelta match\f[R] recursively displays a dataset and its children,
similar to the \f[CR]zfs list \-r\f[R] command, except it compares
common dataset between the \f[I]source\f[R] dataset tree and its
\f[I]target\f[R] replica.
Instead of ZFS Properties, \f[CR]zelta match\f[R] displays fields
describing differences and similarities between the two dataset trees.
This is especially useful for assisting with replication operations and
confirming backups.
.TP
\f[B]\-d \f[BI]depth\f[B], \(endepth \f[BI]depth\f[B]\f[R]
Limit recursion to dataset depth, e.g., \f[B]\-d1\f[R] will report on
the topmost dataset only.
.PP
\f[B]\-H\f[R] Used for scripting mode.
Do not print headers and separate fields by a single tab instead of
arbitrary white space.
.PP
\f[B]\-p\f[R] Display numbers in exact, machine\-readable values,
instead of units such as B, K, M, or G.
.TP
\f[B]\-n, \(endryrun\f[R]
Show the \f[CR]zfs list\f[R] commands instead of executing them.
.TP
\f[B]\-o \f[BI]field\f[B][\&...]\f[R]
A comma\-separated list of properties to display.
See the \f[B]Field Options\f[R] or \f[CR]zelta match \-?\f[R] for
details.
.PP
\f[B]\-q\f[R] Decrease verbosity.
.PP
\f[B]\-v\f[R] Increase verbosity.
.TP
\f[B]\(enW, \(enno\-written\f[R]
Don\(cqt estimate sizes by retrieving the \(lqwritten\(rq property; this
significantly speeds up operation, but may incorrectly report
replicability, .e.g., if the \f[I]target\f[R] has been modified.
.SH FIELD OPTIONS
.PP
.TS
tab(@);
l l.
T{
FIELD
T}@T{
DESCRIPTION
T}
_
T{
ds_suffix
T}@T{
Relative dataset name
T}
T{
match
T}@T{
Latest matching snapshot
T}
T{
num_matches
T}@T{
Total number of matches
T}
T{
xfer_size
T}@T{
Unsynced data size based on snapshots
T}
T{
xfer_num
T}@T{
Unsynced snapshot count
T}
T{
src_name
T}@T{
Full source dataset name
T}
T{
src_first
T}@T{
First source snapshot
T}
T{
src_next
T}@T{
Next source snapshot after match
T}
T{
src_last
T}@T{
Latest source snapshot
T}
T{
src_written
T}@T{
Source data written since last snap
T}
T{
src_snaps
T}@T{
Total source snapshots
T}
T{
tgt_name
T}@T{
Full target dataset name
T}
T{
tgt_first
T}@T{
First target snapshot
T}
T{
tgt_next
T}@T{
Next target snapshot that is blocking sync
T}
T{
tgt_last
T}@T{
Latest target snapshot
T}
T{
tgt_written
T}@T{
Target data written since last snap
T}
T{
tgt_snaps
T}@T{
Total target snapshots
T}
T{
info
T}@T{
Sync state description
T}
.TE
.SH EXAMPLES
\f[B]Basic Comparison:\f[R] Compare snapshots between local source and
target datasets.
.IP
.EX
zelta match tank/source/dataset tank/target/dataset
.EE
.PP
\f[B]Remote Comparison:\f[R] Compare snapshots and show the size in
bytes of missing snapshots on the second system.
.IP
.EX
zelta match \-v user\(atremote.host1:tank/source/dataset user2\(atremote.host2:tank/target/dataset
.EE
.PP
\f[B]Quick backup integrity check:\f[R] Compare the top two levels of
similar backup repositories to see which backups might be missing or out
of between each host.
.IP
.EX
zelta match \-d1 backuphost:rust101/Backups rust000/Backups
.EE
.PP
\f[B]Dry Run:\f[R] Display the \f[CR]zfs list\f[R] commands without
executing them.
.IP
.EX
zelta match \-n tank/source/dataset tank/target/dataset
.EE
.SH SEE ALSO
ssh(1), zelta(8), zfs(8)
.SH AUTHORS
Daniel J. Bell \f[I]\c
.MT bellta@belltower.it
.ME \c
\f[R]
.SH WWW
https://zelta.space
