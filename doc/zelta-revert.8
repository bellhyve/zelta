.\" Automatically generated by Pandoc 3.8.3
.\"
.TH "zelta\-revert" "8" "" "" "System Manager\(cqs Manual"
.SH NAME
\f[B]zelta revert\f[R] \- rewind a ZFS dataset tree in place by renaming
and cloning
.SH DESCRIPTION
\f[B]zelta revert\f[R] rewinds a dataset to a previous snapshot state by
renaming the current dataset and creating a clone from the specified
snapshot.
This technique is a non\-destructive alternative to
\f[CR]zfs rollback\f[R], preserving the current state for forensic
analysis, testing, or recovery scenarios.
.PP
As with other Zelta commands, \f[B]zelta revert\f[R] works recursively
on a dataset tree.
The endpoint may be local or remote via \f[B]ssh(1)\f[R].
.PP
After reverting, the original dataset remains accessible under a new
name, allowing you to examine both the reverted state and the preserved
current state.
.SS Revert Process
\f[B]zelta revert\f[R] performs these operations:
.IP "1." 3
\f[B]Snapshot Selection\f[R]: If a \f[CR]\(atsnapshot\f[R] name is
specified at the end of the endpoint, that snapshot is used.
Otherwise, the most recent snapshot is selected.
.IP "2." 3
\f[B]Dataset Preservation\f[R]: The target dataset is renamed by
appending the snapshot name.
For example, \f[CR]pool/ds\f[R] reverted to snapshot
\f[CR]\(atyesterday\f[R] becomes \f[CR]pool/ds_yesterday\f[R].
Note that no properties, including mountpoint and readonly status, are
altered.
.IP "3." 3
\f[B]Clone Creation\f[R]: For each child dataset, Zelta creates a clone
from the selected snapshot at the original dataset path.
.PP
Remote endpoint names follow \f[B]scp(1)\f[R] conventions.
Dataset names follow \f[B]zfs(8)\f[R] naming conventions.
.PP
Examples:
.IP
.EX
Local:  pool/dataset
Local:  pool/dataset\(atsnapshot
Remote: user\(atexample.com:pool/dataset
Remote: user\(atexample.com:pool/dataset\(atsnapshot
.EE
.SH OPTIONS
\f[B]Endpoint Argument (Required)\f[R]
.TP
\f[I]endpoint\f[R]
The endpoint name to revert, optionally specifying a snapshot.
If no snapshot is specified, the most recent snapshot is used.
.PP
\f[B]Output Options\f[R]
.TP
\f[B]\-v, \-\-verbose\f[R]
Increase verbosity.
Specify once for operational detail, twice (\f[CR]\-vv\f[R]) for debug
output.
.TP
\f[B]\-q, \-\-quiet\f[R]
Quiet output.
Specify once to suppress warnings, twice (\f[CR]\-qq\f[R]) to suppress
errors.
.TP
\f[B]\-n, \-\-dryrun, \-\-dry\-run\f[R]
Display \f[CR]zfs\f[R] commands without executing them.
.SH EXAMPLES
Revert a dataset to its most recent snapshot to investigate a bug while
preserving the current state:
.IP
.EX
zelta revert sink/source
.EE
.PP
The current dataset is renamed to \f[CR]sink/source_<snapshot>\f[R] and
a clone is created at the original path.
.PP
Revert a remote dataset to a specific snapshot:
.IP
.EX
zelta revert production\-host.example:sink/dataset\(at2025\-12\-31
.EE
.PP
After reverting a source dataset, rotate its backup targets to restore
sync continuity:
.IP
.EX
zelta revert sink/source/dataset
zelta rotate sink/source/dataset backup\-host.example:tank/target/dataset
.EE
.PP
The original diverged datasets remain accessible as
\f[CR]sink/source/dataset_<snapshot>\f[R] and
\f[CR]tank/target/dataset_<snapshot>\f[R].
.SH EXIT STATUS
Returns 0 on success, non\-zero on error.
.SH NOTES
See \f[B]zelta\-options(8)\f[R] for environment variables,
\f[CR]zelta.env\f[R] configuration, and \f[CR]zelta policy\f[R]
integration.
.SH SEE ALSO
zelta(8), zelta\-options(7), zelta\-match(8), zelta\-backup(8),
zelta\-policy(8), zelta\-clone(8), zelta\-rotate(8), ssh(1), zfs(8)
.SH AUTHORS
Daniel J. Bell <\f[I]bellhyve\(atzelta.space\f[R]>
.SH WWW
https://zelta.space
