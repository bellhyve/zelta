.\" Automatically generated by Pandoc 3.8.3
.\"
.TH "zelta\-clone" "8" "" "" "System Manager\(cqs Manual"
.SH NAME
\f[B]zelta clone\f[R] \- Perform a recursive clone operation.
.SH SYNOPSIS
\f[B]zelta clone\f[R] [\f[B]\-d\f[R] \f[I]depth\f[R]]
\f[I]source/dataset[\(atsnap]\f[R] \f[I]target/dataset\f[R]
.SH DESCRIPTION
\f[CR]zelta clone\f[R] performs a recursive \f[B]zfs clone\f[R]
operation on a dataset.
This is useful for recursive duplication of dataset trees and backup
inspection and recovery of a files replicated with
\f[CR]zelta backup\f[R].
The clones will reference the latest or indicated snapshot, and consume
practically no additional space.
Clones can be modified and destroyed without affecting their origin
datasets.
.PP
The \f[I]source\f[R] and \f[I]target\f[R] must be on the same host and
pool.
The mountpoint will be inherited below the target parent (as provided by
\f[CR]zfs clone\f[R]).
The \f[I]target\f[R] dataset must not exist.
To create a clone on a remote host ensure the endpoints are identical
including the username and hostname used:
.PP
Example remote operation:
.IP
.EX
zelta clone backup\(athost1.com:tank/zones/data host1.com:tank/clones/data
.EE
.SH OPTIONS
\f[B]Required Options\f[R]
.TP
\f[I]source\f[R]
A dataset, in the form \f[B]pool[/dataset][\(atsnapshot]\f[R], which
will be cloned along with all of its descendents.
If a snapshot is not given, the most recent snapshot will be used.
.TP
\f[I]target\f[R]
A dataset on the same pool as the \f[B]source/dataset\f[R], where the
clones will be created.
This dataset must not exist.
.PP
\f[B]Logging Options\f[R]
.TP
\f[B]\-n, \(endryrun\f[R]
Don\(cqt clone, but show the \f[CR]zfs clone\f[R] commands that would be
executed.
.TP
\f[B]\-q\f[R]
Reduce verbosity.
.TP
\f[B]\-v\f[R]
Increase verbosity.
.PP
\f[B]Dataset and Snapshot Options\f[R]
.TP
\f[B]\(ensnapshot\-always\f[R]
Ensure a snapshot before cloning.
.TP
\f[B]\(ensnapshot\-name\f[R]
Specify a snapshot name.
See \f[CR]zelta.env.example\f[R] to adjust the default naming scheme.
.TP
\f[B]\-d \f[BI]depth\f[B], \(endepth \f[BI]depth\f[B]\f[R]
Limits the depth of all Zelta operations.
.SH EXAMPLES
\f[B]Clone a dataset tree:\f[R]
.IP
.EX
zelta clone tank/vm/myos tank/temp/myos\-202404 
.EE
.PP
\f[B]Recover a dataset tree, in place, to a previous snapshot\(cqs
state:\f[R]
.IP
.EX
zfs rename tank/vm/myos tank/Archives/myos\-202404
zelta clone tank/Archives/myos\-202404\(atgoodsnapshot tank/vm/myos
.EE
.PP
\f[B]Dry Run:\f[R] Display the \f[CR]zfs clone\f[R] commands without
executing them.
.IP
.EX
zelta clone \-n tank/source/dataset tank/target/dataset
.EE
.SH SEE ALSO
zelta(8), zelta\-backup(8), zelta\-match(8), zelta\-options(8),
zelta\-policy(8), zelta\-revert(8), zelta\-rotate(8), zelta\-sync(8),
cron(8), ssh(1), zfs(8), zfs\-clone(8), zfs\-promote(8)
.SH AUTHORS
Daniel J. Bell \f[I]\c
.MT bellta@belltower.it
.ME \c
\f[R]
.SH WWW
https://zelta.space
