# Zelta Sample Backup Policy Configuration
#
# When "zelta" is called with with no options, a backup batch job is called using this configuration
# file, which contains behavior options, backup sources and targets, and other miscellaneous options.
#
# See below for examples and details about each option. For more information, see the README.md
# and wiki here: https://github.com/bellhyve/zelta


### Global Options

# # Set a default backup target for source volumes with no specified target. For example,
# # a source defined as "- source/vol" will be replicated to "BACKUP_ROOT/vol". If none is
# # given, targets must be defined below with: "- source/vol: target/vol"
#
# BACKUP_ROOT: tank/Backups

# # If set to 1 or more, attempted to retry failed replications. If none is given, zelta
# # won't retry when it encounters errors. We recommend 1 or 2 retries to recover from everyday
# # network interruptions. The default is 0.
#
# RETRY: 1

# # If set to 1, replicate intermediate snapshots with "zfs send -I". The default is to use 
# # "zfs send -i" for consistency with "zelta match", but we recommend enabling this.
#
# INTERMEDIATE: 1

# # If on, pass the "zfs send -R" flag which downloads past snapshots recursively up to the latest
# # match. If snapshots are always made with "zfs snapshot -r", "REPLICATE: 1" in conjunction with
# # "DEPTH: 1" will be more efficient by skipping recursive listings.
#
# REPLICATE: 1

# # Restrict listing depth to this many levels. If used without REPLICATE, zelta will produce more
# # shallow replications, e.g., if given "DEPTH: 2" and "one/two/three", only "one/two" will be
# # replicated. By default, the depth is unlimited.
#
# DEPTH: 3

# # Add this many elements up to the pool name underneath BACKUP_ROOT. For example, if given
# # "PREFIX: 99" and source volume "one/two/three", the target will be: BACKUP_ROOT/one/two/three
#
# PREFIX: 0			# PREFIX=1 would add 1 parent dataset name to the target

# # Add the hostname as an element after BACKUP_ROOT, e.g., BACKUP_ROOT/myhost/zroot
#
# HOST_PREFIX: 0			# If set to 1, add the source host's name to BACKUP_ROOT

# # Replicate sources to the following host via SSH rather than a local pool.
#
# PUSH_TO: backup.host

# # By default, or if only one Site has been defined, Zelta runs one replication job at a time. If
# # THREADS is set to 2 or more and multiple Sites are defined, Zelta will replicate from that many
# # Sites at a time. In the example below with "THREADS: 2", the hosts on DEFAULT_SITE and SITE_TWO
# # will replicate simultanouesly. 
#
# THREADS: 2

# # Rather than providing a simple output log, print more detailed JSON output.
#
# JSON: 1


### SITE, HOST, AND VOLUME DEFINITIONS

# # Sites are used for multi-threading replication jobs, or for organizing this file. Consider
# # creating a Site for each physical location
#
# DEFAULT_SITE:

# # # A hostname (or IP) containing source volumes must be indended two spaces. Hosts are connected
# # # to via SSH.
#
#   host1.mynet:

# # # For each host, one or more backup source volumes must be listed. If no target is given,
# # # the volume will be replicated to BACKUP_ROOT as described above. The volume must be indented
# # # with the YAML style two spaces, a dash, and a space:  - source/vol/name
#
#   - pool/vm/netbsd


# # # A target can be specified for a source dataset with a colon. This overrides any element-related
# # # options above.
#   - pool2/jail/linux: tank/jail/linux

# # # Use a hostname of "localhost" to replicate from a local source volume.
#
#   localhost:

# # # You can also define a remote target with a [user@]host: prefix. The following could be used
# # # to send a local VM to a warm failover host:
#
#   - tank/vm/alpine: kvm@remote.host:pool/vm/alpine


# # Here's another example site definition with multiple hosts, source volumes, and targets.
#
# SITE_TWO:
#   host3.othernet:
#   - zroot: tank/Backups/host3
#   host4.othernet:
#   - pool/jail/inst1
#   - pool/jail/inst2
#   - pool/jail/inst3
#   host5.othernet:
#   - pool/vm/proxy: failover.box:tank/vm/proxy
