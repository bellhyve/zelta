#!/bin/ssh command h
#
# zelta.env
#
# These environment variables change zelta's default behavior and
# locations. To function, the PATH must contain the dir with the 
# "zelta" wrapper, and the ZELTA_SHARE dir must contain the awk scripts.
#
# IMPORTANT: ZELTA_AWK, ZELTA_ETC, and ZELTA_ENV must be set as ZELTA_
# prefixed environment variables elsewhere BEFORE running zelta (e.g.,
# in your shell RC or crontab). For example, this file, ZELTA_ENV,
# won't be found if it's not set or not in the default location.
#
# All other variables can be set here for global defaults.
#
# Note that this file should only be used to change the defaults
# globally. Using the ZELTA_ prefix, you can change these values
# in a crontab, script, shell, and other contexts.

# # Set these in your environment (e.g., export ZELTA_AWK="mawk"):
# # ZELTA_AWK (awk executable, must be set before zelta.env is read)
# # ZELTA_ETC (dir for zelta.env and zelta.conf, must be set before)
# # ZELTA_ENV (path to this file, must be set before)
# # ZELTA_SHARE (dir for awk scripts and data files)

# For logging purposes, zelta also looks for $USER and attempts to identify
# the hostname with $HOST or $HOSTNAME.


### Remote Command
# # Change SSH executable. Note that we need `ssh -n` to avoid pipes. Usually
# # ssh changes should be in the backup user's ~/.ssh/config instead.
# REMOTE_SEND_COMMAND="ssh -n"
# REMOTE_RECEIVE_COMMAND="ssh"


### SNAPSHOT NAMES
##################
#
# # Use the following variable to override the snapshot name.
# # By default, we use "zelta_YYYY-MM-DD_HH.MM.SS".
#
# IMPORTANT: To use dynamic names (e.g., from 'date'), use the
# following format: ZELTA_SNAP_NAME="$(your_command)"
# (Including quotes.)
#
# # zfsnap style:
# ZELTA_SNAP_NAME="$(date -u +%Y-%m-%d_%H.%M.%S--1m)"
#
# # TrueNAS auto style:
# ZELTA_SNAP_NAME="$(date -u +auto-%Y-%m-%d_%H-%M)"
#
# # Sanoid autosnap style:
# ZELTA_SNAP_NAME="$(date -u +autosnap_%Y-%m-%d_%H:%M:%S_daily"


### ZFS SEND AND RECEIVE OPTIONS
################################
#
# # Options for unencrypted filesystems and volumes
# ZELTA_SEND_DEFAULT="-L -c -e"
#
# # Options for encrypted datasets
# ZELTA_SEND_RAW="-L -w"
#
# # Additional options for new datasets
# ZELTA_SEND_NEW="-p"
#
# # Toggle intermediate snapshots (1=yes, 0=no)
# ZELTA_SEND_INTR="1"
#
# # Options for replicate mode
# ZELTA_SEND_REPLICATE="-L -s -R -w"
#
# # Default receive options
# ZELTA_RECV_DEFAULT=""
#
# # Options for top dataset on new backup
# ZELTA_RECV_TOP="-o readonly=on"
#
# # Options for filesystems on new backup
# ZELTA_RECV_FS="-u -x mountpoint -o canmount=noauto"
#
# # Options for volumes on new backup
# ZELTA_RECV_VOL=""
#
# # Options for partial receives
# ZELTA_RECV_PARTIAL="-s"
#
# # Options for `zelta clone`
# ZELTA_CLONE_DEFAULT="-po readonly=off"


### LOGGING OPTIONS
##################
#
# # Control verbosity and output format for notices, warnings, etc
# LOG_LEVEL: 0 (errors only), 1 (warnings), 2 (notices, default), 3 (info), 4 (debug)
# ZELTA_LOG_LEVEL="2"
#
# # Output mode: 'text' (default) or 'json' (for structured logs, e.g., in scripts)
# ZELTA_LOG_MODE="text"
#
# # Divert all output to a file (useful for cron jobs or long runs)
# ZELTA_LOG_FILE="/var/log/zelta.log"


### REMOTE/SSH OPTIONS
######################
#
# # SSH command for general operations (must support -n to avoid stdin issues)
# ZELTA_REMOTE_COMMAND="ssh"
#
# # Default SSH for misc ops (prevents stdin reading)
# ZELTA_REMOTE_DEFAULT="ssh -n"
#
# # SSH for 'zfs send' (may need tweaks for slow networks)
# ZELTA_REMOTE_SEND="ssh -n"
#
# # SSH for 'zfs recv' (can be customized for bandwidth limits)
# ZELTA_REMOTE_RECV="ssh"

### GENERAL REPLICATION AND SAFETY OPTIONS
###########################################
#
# # Snapshot mode: 'IF_NEEDED' (default, only if data changed), 'ALWAYS', 'SKIP', or '0' (off)
# ZELTA_SNAP_MODE="IF_NEEDED"
#
# # Sync direction for remote endpoints: 'PULL' (default) or 'PUSH'
# ZELTA_SYNC_DIRECTION="PULL"
#
# # Enable resume of interrupted transfers (default: on for safety)
# ZELTA_RESUME="1"
#
# # Auto-create parent datasets if missing (default: on)
# ZELTA_CREATE_PARENT="1"
#
# # Limit recursion depth (0 = unlimited, default)
# ZELTA_DEPTH="0"
#
# # Exclude patterns (comma-separated; see manpage for syntax)
# ZELTA_EXCLUDE="*/swap,@temp-*"

### MISCELLANEOUS UTILITY OPTIONS
#################################
#
# # Enable written size calculations in 'zelta match' (default: on)
# ZELTA_LIST_WRITTEN="1"
#
## # Use pv for progress and a 10m limit:
# ZELTA_RECEIVE_PREFIX="pv -ptr -L 10m"
